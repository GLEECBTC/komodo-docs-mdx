export const title = "Komodo DeFi Framework Method: Enable Balance Streaming";
export const description = "Using this method, you can enable balance events streaming for a specific coin.";

# Enable Balance Streaming

## stream::balance::enable {{label : 'stream::balance::enable', tag : 'API-v2'}}

Using this method, you can enable balance events streaming for a specific coin, to a specific client. For ETH-like coins and tokens, you can also specify the streaming interval in seconds (to avoid excessive polling leading to upstream API rate limts)

### Request Parameters

<CompactTable source="v2/streaming.BalanceEnableRequestParameters" />

<Note>
  The client defines its own id when opening a connection to the stream, and each client\_id can only be viewed by a single client (i.e. the `?id=` url param won't work in more than one browser tab).
  The selected coin must be enabled prior to enabling streaming.
</Note>

### Response Parameters

<CompactTable source="v2/streaming.BalanceEnableResponseParameters" />

#### ðŸ“Œ Examples

<CodeGroup title="Balance Enable" tag="POST" label="balance_enable" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "stream::balance::enable",
    "mmrpc": "2.0",
    "params": {
      "coin": "MATIC",
      "config": {
        "stream_interval_seconds": 15
      },
      "client_id": 1
    }
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Balance Enable Response" collapsedText="Show Balance Enable Response">
  ```json
  {
      "mmrpc": "2.0",
      "result": {
          "streamer_id": "BALANCE:MATIC"
      },
      "id": null
  }
  ```
</CollapsibleSection>

Here is an example of the stream data you should be able to see in [http://localhost:7783/event-stream?id=1](http://localhost:7783/event-stream?id=1) once a balance change is detected:

`data: {"_type":"BALANCE:MATIC","message":[{"ticker":"MATIC","address":"0xc11b6070c84a1e6fc62b2a2acf70831545d5edd4","balance":{"spendable":"2.00000001","unspendable":"0"}}]}`

### Error Types

<CompactTable source="v2/streaming.BalanceEnableErrorTypes" />

<CollapsibleSection expandedText="Hide Error Responses" collapsedText="Show Error Responses">
  ##### Error Response (Coin Not Found)

  ```json
  {
      "mmrpc": "2.0",
      "error": "CoinNotFound",
      "error_path": "balance",
      "error_trace": "balance:47]",
      "error_type": "CoinNotFound",
      "id": null
  }
  ```

  ##### Error (Unknown Client)

  ```json
  {
      "mmrpc": "2.0",
      "error": "UnknownClient",
      "error_path": "balance",
      "error_trace": "balance:99]",
      "error_type": "EnableError",
      "error_data": "UnknownClient",
      "id": null
  }
  ```

  ##### Error (Client Already Listening)

  ```json
  {
      "mmrpc": "2.0",
      "error": "ClientAlreadyListening",
      "error_path": "balance",
      "error_trace": "balance:99]",
      "error_type": "EnableError",
      "error_data": "ClientAlreadyListening",
      "id": null
  } 
  ```

  ##### Error (Enable Error)

  ```json
  {
      "mmrpc": "2.0",
      "error": "Invalid config provided. No config needed",
      "error_path": "balance",
      "error_trace": "balance:60]",
      "error_type": "EnableError",
      "error_data": "Invalid config provided. No config needed",
      "id": null
  }
  ```
</CollapsibleSection>

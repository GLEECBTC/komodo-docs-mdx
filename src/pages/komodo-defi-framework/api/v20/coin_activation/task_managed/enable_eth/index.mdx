export const title = "Komodo DeFi Framework Method: ETH/EVM Activation Tasks";
export const description =
  "The methods in this document demonstrate the task managed activation of ETH/EVM coins and tokens.";

import trezorpin from "@/public/images/docs/api-images/trezor_pin.png";

# Task: ETH/EVM Activation

## task::enable\_eth::init {{label : 'task::enable_eth::init', tag : 'API-v2'}}

Use this method for task managed activation of ETH/EVM coins & tokens. Refer to the [task managed activation overview](/komodo-defi-framework/api/v20/coin_activation/task_managed/) for activation of other coin types.

#### Arguments

<CompactTable source="v2/coin_activation.TaskEnableEthArguments" />

### Response

| Parameter | Type   | Description                                                                                                           |
| --------- | ------ | --------------------------------------------------------------------------------------------------------------------- |
| status    | string | A short indication of how the enabling is progressing.                                                                |
| details   | object | Depending on the state of enabling progress, this will contain different information as shown in the responses below. |

Possible `status` values while activation is in progress:

*   `ActivatingCoin`: The first step of activation. It does not require any action from the user.
*   `RequestingWalletBalance`: The first step of activation, while initial balances info is being requested. It does not require any action from the user.
*   `Finishing`: Activation process completed
*   `WaitingForTrezorToConnect`: Waiting for the user to plugin a Trezor device
*   `FollowHwDeviceInstructions`: Waiting for the user to follow the instructions on the device

Once complete, `status`  will be `Ok`, and the `details` object will have the following structure:

#### Response

<CompactTable source="v2/coin_activation.TaskResponse" />

#### ðŸ“Œ Examples

#### Activation in Trezor mode

<CodeGroup title="task::enable_eth::init" tag="POST" label="task::enable_eth::init" mm2MethodDecorate="true" source="v2/coin_activation.TaskEnableEthInitTrezor" />

<KdfResponses responseKey="v2/coin_activation.TaskEnableEthInitTrezor" />

## task::enable\_eth::status {{label : 'task::enable_eth::status', tag : 'API-v2'}}

After running the `task::enable_eth::init` method, we can query the status of activation to check its progress.
The response will return the following:

*   Result of the task (success or error)
*   Progress status (what state the task is in)
*   Required user action (what user should do before the task can continue)

#### Arguments

<CompactTable source="v2/coin_activation.TaskStatusArguments" />

#### Command

<CodeGroup title="task::enable_eth::status" tag="POST" label="task::enable_eth::status" mm2MethodDecorate="true" source="v2/coin_activation.TaskEnableEthStatus" />

#### Response (ready, successful, HD mode)

<CompactTable source="v2/coin_activation.TaskStatusResponseReady" />

<KdfResponses responseKey="v2/coin_activation.TaskEnableEthStatus" />

#### Response (in progress)

<KdfResponses responseKey="v2/coin_activation.TaskEnableEthStatus" />

#### Response (ready, error)

| Parameter      | Type   | Description                                                                                                         |
| -------------- | ------ | ------------------------------------------------------------------------------------------------------------------- |
| status         | string | A short indication of how the requested process is progressing.                                                     |
| details.result | object | Depending on the state of process progress, this will contain different information as detailed in the items below. |
| .error         | string | The ticker of the coin being activated                                                                              |
| .error\_path   | string | Used for debugging. A reference to the function in code base which returned the error                               |
| .error\_trace  | string | Used for debugging. A trace of lines of code which led to the returned error                                        |
| .error\_type   | string | An enumerated error identifier to indicate the category of error                                                    |
| .error\_data   | string | Additonal context for the error type                                                                                |

Possible Error Cases:

*   `TaskTimedOut` - Timed out waiting for coin activation, connecting to the device trezor or for user to confirm pubkey)
*   `CoinCreationError` - Error during activation. E.g. incorrect or inactive electrum servers.
*   `HwError` - **This is the most important error type.** Unlike other error types, `HwError` requires the GUI / User to check the details in `error_data` field to know which action is required. View the [HwError error type details](/komodo-defi-framework/api/v20/utils/task_init_trezor/status/#details-for-hw-error-error-type) for more info.

## task::enable\_eth::user\_action {{label : 'task::enable_eth::user_action', tag : 'API-v2'}}

If the `task::enable_eth::status` returns `UserActionRequired`, we need to use the `task::enable_eth::user_action` method to enter our PIN

#### Arguments

<CompactTable source="v2/coin_activation.TaskUserActionArguments" />

<OptimizedImage src={trezorpin} classNaming="w-full" alt="Trezor Pin" />

#### Response

<CompactTable source="v2/coin_activation.TaskUserActionResponse" />

#### ðŸ“Œ Examples

#### Command

<CodeGroup title="task::enable_eth::user_action" tag="POST" label="task::enable_eth::user_action" mm2MethodDecorate="true" source="v2/coin_activation.TaskEnableEthUserActionPin" />

<KdfResponses responseKey="v2/coin_activation.TaskEnableEthUserActionPin" />

## task::enable\_eth::cancel {{label : 'task::enable_eth::cancel', tag : 'API-v2'}}

If you want to cancel the enabling process before it has completed, you can use this method.

#### Arguments

<CompactTable source="v2/coin_activation.TaskCancelArguments" />

#### Response

<CompactTable source="v2/coin_activation.TaskCancelResponse" />

<CodeGroup title="task::enable_eth::cancel" tag="POST" label="task::enable_eth::cancel" mm2MethodDecorate="true" source="v2/coin_activation.TaskEnableEthCancel" />

<KdfResponses responseKey="v2/coin_activation.TaskEnableEthCancel" />

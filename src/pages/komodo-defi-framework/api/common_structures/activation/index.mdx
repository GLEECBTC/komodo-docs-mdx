export const title = "Komodo DeFi SDK Common Structures: Activation";
export const description = "The Komodo DeFi SDK uses a variety of activation methods, depending on the type of coin.";


# Activation Common Structures

## activation\_common\_structures {{label : 'activation_common_structures', tag : 'structures'}}

### ActivationMode

<CompactTable source="common-structures/activation.ActivationMode" />

<CollapsibleSection expandedText="Hide Example" collapsedText="Show Example">
  Defines the activation mode for QTUM, BCH, UTXO & ZHTLC coins.

  ```json
  {
      "mode": {
          "rpc": "Electrum",
          "rpc_data": {
              "servers": [
                  {
                      "url": "electrum1.cipig.net:10020"
                  },
                  {
                      "url": "electrum2.cipig.net:10020"
                  }
              ]
          }
      },
  }
  ```
</CollapsibleSection>

### ActivationRpcData

Contains information about electrum & lightwallet\_d servers for coins being used in `Electrum` or `Light` mode.

<CompactTable source="common-structures/activation.ActivationParams" />

<DevComment>
  `electrum` and `electrum_servers` are both used for the same purpose. This should be consolidated in the API.
</DevComment>

### ActivationParams

The `ActivationParams` object defines additional parameters used for activation. These params may vary depending on the coin type.

<CompactTable source="common-structures/activation.ActivationParams" variant="compact" />

<DevComment>
  Is priv\_key\_policy still a thing?
  Defaults to `ContextPrivKey`. Set as `Trezor` to activate in Trezor mode.
</DevComment>

<Note>
  For ZHTLC coins, older wallets need to set the `sync_params` field to a date before its
  first transaction to see all balance and history. This may take a long time on the first
  activation, but subsequent activations will be much faster.
  Using a smaller `scan_blocks_per_iteration` and larger `scan_interval_ms`,
  will reduce the average CPU load during ZHTLC coin activation (at the cost of a
  longer activation time). These optional fields are recommended when developing
  for iOS, where a high CPU load may kill the activation process. Android &
  desktop operating systems do not appear to have any problems with high CPU
  load during ZHTLC coin activation.
</Note>

### ActivationServers

Contains information electrum servers for coins being used in `Electrum` or `Light` mode.

<CompactTable source="common-structures/activation.ActivationServers" variant="compact" />

<CollapsibleSection expandedText="Hide Examples" collapsedText="Show Examples">
  #### ZHTLC Example

  ```json
  {
    "activation_params": {
      "mode": {
        "rpc": "Light",
        "rpc_data": {
          "electrum_servers": [
            {
              "url":"zombie.dragonhound.info:10133"
            }
          ],
          "light_wallet_d_servers": [
            "http://zombie.dragonhound.info:1443"
          ]
        },
        "sync_params": { 
            "height":  2528700
        }
      },
      "zcash_params_path": "/home/username/path_to/.zcash-params",
      "scan_blocks_per_iteration": 100,
      "scan_interval_ms": 200
    }
  }
  ```

  #### HD UTXO Activation (v2)

  ```json
  {
  "activation_params": {
      "mode": {
          "rpc": "Electrum",
          "rpc_data": {
              "servers": [
                  {
                      "url": "electrum2.cipig.net:10001"
                  },
                  {
                      "url": "electrum3.cipig.net:20001",
                      "ws_url": "electrum3.cipig.net:30001",
                      "protocol": "SSL"
                  }
              ]
          }
      },
      "scan_policy": "scan_if_new_wallet",
      "priv_key_policy": {"type": "Trezor"},
      "min_addresses_number": 3,
      "gap_limit": 20
  }
  }
  ```
</CollapsibleSection>

### AddressInfo

The `AddressInfo` object includes the following items for a given address:

<CompactTable source="common-structures/activation.AddressInfo" />

<CollapsibleSection expandedText="Hide Examples" collapsedText="Show Examples">
  #### Example with balances

  ```json
  "bitcoincash:qrf5vpn78s7rjexrjhlwyzzeg7gw98k7t5qx64fztj": {
      "derivation_method": {
          "type": "Iguana"
      },
      "pubkey": "036879df230663db4cd083c8eeb0f293f46abc460ad3c299b0089b72e6d472202c",
      "balances": {
          "spendable": "0.11398301",
          "unspendable": "0.00001"
      }
  }
  ```

  #### Example without balances

  ```json
  "bitcoincash:qrf5vpn78s7rjexrjhlwyzzeg7gw98k7t5qx64fztj": {
      "derivation_method": {
          "type": "Iguana"
      },
      "pubkey": "036879df230663db4cd083c8eeb0f293f46abc460ad3c299b0089b72e6d472202c",
      "tickers": ["ASLP-SLP"]
  }
  ```
</CollapsibleSection>

### CoinProtocol

<CompactTable source="common-structures/activation.CoinProtocol" />

### CoinProtocolData

<CompactTable source="common-structures/activation.CoinProtocolData" />

### CoinNode

The `CoinNode` object includes the following items for a given coin or token:

<CompactTable source="common-structures/activation.CoinNode" />

<CollapsibleSection expandedText="Hide Example" collapsedText="Show Example">
  ```json
  {
      "url": "https://nucleus-rpc.alpha.komodo.earth",
      "komodo_proxy": true
  }
  ```
</CollapsibleSection>

### SwapV2Contracts

The `SwapV2Contracts` object includes the following items for a given coin or token:

<CompactTable source="common-structures/activation.TokensRequest" />

<CollapsibleSection expandedText="Hide Example" collapsedText="Show Example">
  ```json
  {
        "maker_swap_v2_contract": "0x9130b257D37A52E52F21054c4DA3450c72f595CE",
        "taker_swap_v2_contract": "0x9130b257D37A52E52F21054c4DA3450c72f595CE",
        "nft_maker_swap_v2_contract": "0x9130b257D37A52E52F21054c4DA3450c72f595CE"
  }
  ```
</CollapsibleSection>

### TokenActivationParams

Standard object structure used in token activation methods for specifying activation parameters.

<CompactTable source="common-structures/activation.TokenActivationParams" />

### TokensRequest

The `TokensRequest` object includes the following items for a given coin or token:

<CompactTable source="common-structures/activation.TokensRequest" />

<CollapsibleSection expandedText="Hide Example" collapsedText="Show Example">
  ```json
  {
      "ticker": "MINDS-ERC20",
      "required_confirmations": 4
  }
  ```
</CollapsibleSection>

### UtxoMergeParams

The `UtxoMergeParams` object defines how often and at which thresholds to merge UTXOs. This is useful for wallets which have been used for a long time, and have many small UTXOs from mining activity.

<CompactTable source="common-structures/activation.UtxoMergeParams" />

<CollapsibleSection expandedText="Hide Example" collapsedText="Show Example">
  ```json
  {
  "merge_at": 50,
  "check_every": 10,
  "max_merge_at_once": 25
  }
  ```
</CollapsibleSection>
